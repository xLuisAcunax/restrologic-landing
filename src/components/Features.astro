---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const icons = {
  dashboard: `<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"><path d="m28 35.002l.678 3.392a2 2 0 0 0 1.961 1.608h.901a3 3 0 0 1 2.942 2.412l.04.196a2 2 0 0 1-1.962 2.392H15.44a2 2 0 0 1-1.962-2.392l.04-.196a3 3 0 0 1 2.941-2.412h.9a2 2 0 0 0 1.962-1.608L20 35.002"/><path d="M3.444 30.045c.235 2.527 2.24 4.384 4.774 4.542c3.225.2 8.388.413 15.782.413s12.557-.212 15.782-.413c2.534-.158 4.539-2.015 4.774-4.543c.23-2.476.444-6.107.444-11.044s-.214-8.568-.444-11.044c-.235-2.528-2.24-4.385-4.774-4.543C36.557 3.213 31.394 3 24 3s-12.557.213-15.782.413c-2.534.158-4.539 2.015-4.774 4.543C3.214 10.432 3 14.063 3 19s.214 8.568.444 11.045Z"/><path d="M17.5 3.5v31M9 11h3m11 0h16M9 18h3m11 0h16m-16 7h12"/></g>`,
  config: `<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"><path d="M19.158 4.362c.115-.24.281-.451.517-.575c.56-.294 1.868-.787 4.326-.787s3.765.493 4.325.787c.236.124.402.335.518.575c.335.7 1.082 2.314 1.643 3.92a17 17 0 0 1 3.878 2.242c1.672-.317 3.447-.477 4.222-.537c.265-.02.531.018.756.16c.535.339 1.616 1.224 2.844 3.353c1.23 2.129 1.456 3.507 1.482 4.14c.01.266-.089.515-.24.735c-.439.641-1.464 2.097-2.574 3.386a17.2 17.2 0 0 1 0 4.478c1.11 1.29 2.135 2.745 2.574 3.386c.15.22.25.47.24.735c-.026.633-.253 2.011-1.482 4.14s-2.31 3.014-2.844 3.353c-.225.142-.49.18-.757.16c-.775-.06-2.549-.22-4.22-.537a17 17 0 0 1-3.878 2.243c-.562 1.605-1.309 3.218-1.644 3.92c-.116.24-.282.45-.518.574c-.56.294-1.867.787-4.325.787s-3.765-.493-4.326-.787c-.236-.124-.402-.334-.517-.575c-.335-.7-1.083-2.314-1.644-3.92a17 17 0 0 1-3.878-2.242c-1.672.317-3.446.477-4.22.537c-.266.02-.532-.018-.757-.16c-.535-.339-1.616-1.224-2.845-3.353s-1.455-3.507-1.48-4.14c-.012-.266.088-.515.239-.735c.439-.641 1.464-2.097 2.574-3.386a17.2 17.2 0 0 1 0-4.478c-1.11-1.29-2.135-2.745-2.575-3.386c-.15-.22-.25-.47-.24-.735c.027-.633.253-2.011 1.482-4.14s2.31-3.014 2.844-3.353c.226-.142.491-.18.757-.16c.775.06 2.55.22 4.221.537a17 17 0 0 1 3.878-2.243c.561-1.605 1.309-3.219 1.644-3.92Z"/><path d="M14 24a10 10 0 1 0 20 0a10 10 0 1 0-20 0"/></g>`,
  orders: `<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"><path d="M38.872 15.507c-.351-.98-1.549-3.567-5.268-7.213c-3.941-3.864-6.67-4.952-7.52-5.218A162 162 0 0 0 21 3c-6.264 0-10.566.32-13.248.627c-2.201.252-3.85 1.903-4.092 4.105C3.34 10.622 3 15.473 3 23s.341 12.378.66 15.268c.242 2.202 1.891 3.853 4.092 4.105c1.898.217 4.607.44 8.248.553"/><path d="M38.886 15.958c-2.087.311-5.841.072-8.69-.191a4.664 4.664 0 0 1-4.229-4.211c-.268-2.802-.506-6.466-.18-8.488M41 34.258s-.473-2.108-3.312-4.946C34.85 26.473 32.742 26 32.742 26M10 13l4 4l5-7m-9 14l4 4l5-7"/><path d="M43.665 31.592c1.454-1.453 2.01-3.577.794-5.235a18 18 0 0 0-1.77-2.046c-.74-.74-1.43-1.318-2.047-1.77c-1.657-1.216-3.781-.66-5.235.793l-12.34 12.34c-.543.544-.915 1.233-.979 2c-.087 1.041-.151 2.81.017 5.428a1.92 1.92 0 0 0 1.793 1.793c2.617.168 4.387.104 5.428.016c.766-.064 1.456-.435 2-.98z"/></g>`,
  reports: `<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"><path d="M5 26c5.86-6.959 11.184-10.966 13.613-12.612c.794-.539 1.841-.363 2.444.383a95 95 0 0 1 3.31 4.377c.808 1.132 2.513 1.168 3.408.104C31.911 13.34 37.501 8.5 37.501 8.5"/><path d="M42.376 11.323c.664-3.235.657-6.087.601-7.43a.9.9 0 0 0-.869-.87a31.7 31.7 0 0 0-7.43.601c-.753.154-1.002 1.075-.46 1.618l6.54 6.54c.544.543 1.464.293 1.618-.459M5.267 44.96c-1.128-.037-1.992-.719-2.106-1.841C3.07 42.239 3 40.932 3 39s.072-3.24.16-4.119c.115-1.122.979-1.804 2.107-1.842C5.934 33.017 6.827 33 8 33s2.066.017 2.733.04c1.128.037 1.992.719 2.106 1.841c.09.88.161 2.187.161 4.119s-.072 3.24-.16 4.119c-.115 1.122-.979 1.804-2.107 1.842c-.668.022-1.56.039-2.733.039s-2.066-.017-2.733-.04m32.29-.026c-1.3-.08-2.203-1.018-2.297-2.317C35.132 40.856 35 37.667 35 32s.132-8.856.26-10.617c.094-1.299.997-2.238 2.297-2.317C38.187 19.027 38.99 19 40 19s1.813.027 2.443.066c1.3.08 2.203 1.018 2.297 2.317c.128 1.761.26 4.95.26 10.617s-.132 8.856-.26 10.617c-.094 1.299-.997 2.238-2.297 2.317c-.63.039-1.432.066-2.443.066c-1.01 0-1.813-.027-2.443-.066m-16.057.018c-1.264-.055-2.187-.9-2.293-2.16C19.098 41.494 19 39.386 19 36s.098-5.494.207-6.792c.106-1.26 1.029-2.105 2.292-2.16A57 57 0 0 1 24 27c1.042 0 1.862.02 2.5.048c1.264.055 2.187.9 2.293 2.16c.109 1.298.207 3.406.207 6.792s-.098 5.494-.207 6.792c-.106 1.26-1.029 2.105-2.292 2.16c-.639.028-1.459.048-2.501.048a58 58 0 0 1-2.5-.048"/></g>`
};

const features = [
  { title: t('features.dashboard'), desc: t('features.dashboard.desc'), icon: 'dashboard' },
  { title: t('features.config'), desc: t('features.config.desc'), icon: 'config' },
  { title: t('features.orders'), desc: t('features.orders.desc'), icon: 'orders' },
  { title: t('features.reports'), desc: t('features.reports.desc'), icon: 'reports' },
];
---

<section id="features" class="py-20 bg-base-200">
  <div class="container mx-auto px-4">
    <h2 class="text-4xl font-bold text-center mb-10">{t('nav.features')}</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      {features.map(feature => (
        <div class="card bg-base-100 shadow-xl border border-base-200 hover:border-primary transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl">
          <div class="card-body items-center text-center">
            <div class="mb-4 text-primary p-4 bg-primary/10 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" set:html={icons[feature.icon as keyof typeof icons]} />
            </div>
            <h3 class="card-title">{feature.title}</h3>
            <p>{feature.desc}</p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
